<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×‘×“×™×§×ª PDF ×‘×¢×‘×¨×™×ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 40px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #00D4D4;
      text-align: center;
    }
    button {
      background: #00D4D4;
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 18px;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      margin: 20px 0;
    }
    button:hover {
      background: #00B8B8;
    }
    #status {
      text-align: center;
      margin: 20px 0;
      font-size: 16px;
    }
    .success {
      color: green;
    }
    .error {
      color: red;
    }
    .info {
      background: #EEF2FF;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
      border-right: 4px solid #00D4D4;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§ª ×‘×“×™×§×ª ×™×¦×™×¨×ª PDF ×‘×¢×‘×¨×™×ª</h1>

    <div class="info">
      <strong>××˜×¨×”:</strong> ×œ×‘×“×•×§ ×©×”×¤×•× ×˜ ×”×¢×‘×¨×™ Rubik ×¢×•×‘×“ × ×›×•×Ÿ ×‘-PDF
      <br><br>
      <strong>××” ×ª×¨××”:</strong>
      <ul>
        <li>×˜×§×¡×˜ ×¢×‘×¨×™ ×ª×§×™×Ÿ (×œ× ××—×•×¨×‘×©)</li>
        <li>×™×™×©×•×¨ ××™××™×Ÿ ×œ×©×××œ (RTL)</li>
        <li>×˜×‘×œ××•×ª ××¡×•×“×¨×•×ª</li>
        <li>×¤×•× ×˜ Rubik ×™×¤×” ×•××™×›×•×ª×™</li>
      </ul>
    </div>

    <button onclick="generateTestPDF()">
      âš¡ ×¦×•×¨ PDF ×œ×“×•×’××”
    </button>

    <div id="status"></div>
  </div>

  <script type="module">
    import { generateProposalPDF } from './src/utils/exportProposalPDF.js';

    window.generateTestPDF = async function() {
      const statusEl = document.getElementById('status');
      statusEl.innerHTML = 'â³ ××™×™×¦×¨ PDF...';
      statusEl.className = '';

      try {
        const testData = {
          clientName: '×™×©×¨××œ ×™×©×¨××œ×™',
          clientCompany: '×—×‘×¨×ª ×”×˜×›× ×•×œ×•×’×™×” ×‘×¢"×',
          services: [
            {
              id: 'service-1',
              category: 'automations',
              name: 'Lead Management Automation',
              nameHe: '××•×˜×•××¦×™×” ×œ× ×™×”×•×œ ×œ×™×“×™×',
              description: 'Automate lead capture and routing',
              descriptionHe: '××•×˜×•××¦×™×” ××œ××” ×œ×§×œ×™×˜×ª ×œ×™×“×™× ×•× ×™×ª×•×‘ ××•×˜×•××˜×™ ×œ××•×›×¨ ×”×¨×œ×•×•× ×˜×™',
              basePrice: 15000,
              estimatedDays: 10,
              complexity: 'medium',
              tags: ['crm', 'automation'],
              reasonSuggested: 'Based on your current manual lead management',
              reasonSuggestedHe: '××–×”×™× ×• ×©××ª× ×× ×”×œ×™× ×œ×™×“×™× ×‘××•×¤×Ÿ ×™×“× ×™ - ×–×” ×™×—×¡×•×š ×œ×›× 15 ×©×¢×•×ª ×©×‘×•×¢×™×•×ª',
              relevanceScore: 9,
              dataSource: ['leadsAndSales'],
              selected: true,
            },
            {
              id: 'service-2',
              category: 'ai_agents',
              name: 'AI Customer Support Agent',
              nameHe: '×¡×•×›×Ÿ AI ×œ×ª××™×›×” ×‘×œ×§×•×—×•×ª',
              description: 'AI agent for customer support',
              descriptionHe: '×¡×•×›×Ÿ AI ×©××˜×¤×œ ×‘×¤× ×™×•×ª ×œ×§×•×—×•×ª ×‘××•×¤×Ÿ ××•×˜×•××˜×™ 24/7',
              basePrice: 25000,
              estimatedDays: 15,
              complexity: 'complex',
              tags: ['ai', 'support'],
              reasonSuggested: 'High volume of support tickets',
              reasonSuggestedHe: '×–×™×”×™× ×• × ×¤×— ×’×‘×•×” ×©×œ ×¤× ×™×•×ª ×©×™×¨×•×ª - AI ×™×¤×ª×•×¨ 70% ××”×Ÿ ××•×˜×•××˜×™×ª',
              relevanceScore: 8,
              dataSource: ['customerService'],
              selected: true,
            },
            {
              id: 'service-3',
              category: 'integrations',
              name: 'Zoho-WhatsApp Integration',
              nameHe: '××™× ×˜×’×¨×¦×™×” Zoho-WhatsApp',
              description: 'Connect Zoho CRM with WhatsApp Business',
              descriptionHe: '×—×™×‘×•×¨ ××•×˜×•××˜×™ ×‘×™×Ÿ Zoho CRM ×œ×•×•××˜×¡××¤ ×‘×™×–× ×¡ ×¢× ×¡× ×›×¨×•×Ÿ ×“×•-×›×™×•×•× ×™',
              basePrice: 12000,
              estimatedDays: 7,
              complexity: 'medium',
              tags: ['integration', 'messaging'],
              reasonSuggested: 'You use both systems separately',
              reasonSuggestedHe: '××ª× ××©×ª××©×™× ×‘×©× ×™ ×”××¢×¨×›×•×ª ×‘× ×¤×¨×“ - × ×—×‘×¨ ××•×ª× ×œ×ª×§×©×•×¨×ª ××”×™×¨×” ×™×•×ª×¨',
              relevanceScore: 7,
              dataSource: ['systems'],
              selected: true,
              notes: '×›×•×œ×œ ×”×“×¨×›×” ×•×”×˜××¢×” ×œ××©×ª××©×™×',
            },
          ],
          proposalData: {
            meetingId: 'test-meeting-123',
            generatedAt: new Date(),
            summary: {
              totalServices: 3,
              totalAutomations: 1,
              totalAIAgents: 1,
              totalIntegrations: 1,
              identifiedProcesses: 8,
              potentialMonthlySavings: 18000,
              potentialWeeklySavingsHours: 25,
            },
            proposedServices: [],
            selectedServices: [],
            totalPrice: 52000,
            totalDays: 32,
            expectedROIMonths: 3,
            monthlySavings: 18000,
            customNotes: '×”×¦×¢×” ××•×ª×××ª ××™×©×™×ª ×¢×œ ×‘×¡×™×¡ ×”× ×™×ª×•×— ×”××¢××™×§ ×©×¢×¨×›× ×•',
          },
        };

        console.log('ğŸš€ Generating PDF...');
        const pdfBlob = await generateProposalPDF(testData);

        console.log('âœ… PDF generated!', pdfBlob);

        // Download the PDF
        const url = URL.createObjectURL(pdfBlob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'test-proposal-hebrew.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        statusEl.innerHTML = 'âœ… PDF × ×•×¦×¨ ×‘×”×¦×œ×—×”! ×”×§×•×‘×¥ ×”×•×¨×“ ×œ××—×©×‘ ×©×œ×š.';
        statusEl.className = 'success';

      } catch (error) {
        console.error('Error:', error);
        statusEl.innerHTML = `âŒ ×©×’×™××”: ${error.message}`;
        statusEl.className = 'error';
      }
    };
  </script>
</body>
</html>
